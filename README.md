# elves-shoemaker
16GB vRAMで完結する、ローカルLLM自律エージェントの司令塔

## 命名のバックストーリー
「小人の靴屋」に着想を得た、自律型AIエージェントのオーケストレーターです。  
夜中に小人が靴を作るように、人間が介入することなく、背後で静かにタスクを完結させる存在を目指しています。

## 本プロダクトの役割
ElvesShoemaker は、AIエージェントを動かすための **「オーケストレーター（司令塔）」** です。
AIエージェントを構成する以下の要素を統合し、一つの自律したシステムとして機能させます。

1. **LLM（脳）**: 思考と意思決定（LM Studio等で動作するローカルモデルを想定）
2. **MCPサーバー（手足）**: 外界への干渉（ファイルの読み書き、コマンド実行）
3. **オーケストレーター（司令塔／本プロダクト）**: 全体の管理（状態制御、履歴DBの運用、コンテキストの最適化）

## 概要
ElvesShoemaker は、限られたリソース（vRAM 16GB）で動作を完結させる、ローカル完結型の自律実行基盤です。  
司令塔として、エージェントが内部ステート（PDCA）を切り替えながら、各モード内で「思考」と「操作」を繰り返し、完了まで自走する環境を提供します。

## 内部ステート（PDCAモード）の役割
司令塔は、目的に応じて以下の4つのモードを切り替えます。各モード内では、目標が達成されるまでLLMの推論とMCPの実行が可変長で繰り返されます。

- **Plan（調査と計画モード）**: 【MCP使用：可】  
  現在の環境（ファイル構成やコード内容）を納得いくまで調査し、次に実行すべき具体的な「作業手順」を構築します。
- **Do（実行モード）**: 【MCP使用：可】  
  Planで立てた計画に基づき、実作業を行います。1つの変更ごとに結果を確認し、必要に応じて連続的に操作を行います。
- **Check（検証モード）**: 【MCP使用：可】  
  作業が完了したか、客観的な証拠を集めます。テスト実行や差分確認を繰り返し、修正の正当性を厳格に評価します。
- **Act（記憶の整理モード）**: 【MCP使用：不可（内省）】  
  次モードへ移る前の「脳内整理」です。モード内で行われた膨大なやり取りを破棄・要約し、重要な教訓と進捗のみをDBへ保存。コンテキストを最小限に圧縮し、知能を維持します。

## 特徴
- **可変長ループ**: 各モード内での試行錯誤を許容しつつ、モードの切り替わり（Act）で記憶をリセットするため、長時間走行でもメモリが溢れません。
- **重み付け学習**: 成功した手順や重要な修正記録をDBに保存する際、重み付けを行うことで、使えば使うほど環境に馴染んだ職人へと進化します。
- **完全ローカル**: 外部コストをかけずに無限に試行錯誤が可能です。

## 動作要件
- **vRAM 16GB (RTX 5060 Ti 等)**
- **LM Studio**（LLMサーバーとして利用）
- **Node.js 環境**
