# elves-shoemaker

## 命名のバックストーリー
「小人の靴屋」に着想を得た、自律型AIエージェントのオーケストレーターです。  
夜中に小人が靴を作るように、人間が介入することなく、背後で静かにタスクを完結させる存在を目指しています。

## 本プロダクトの役割
ElvesShoemaker は、AIエージェントを動かすための**「オーケストレーター（司令塔）」**です。
AIエージェントを構成する以下の要素を統合し、一つの自律したシステムとして機能させます。

1. **LLM（脳）**: 思考と意思決定（LM Studio等で動作するローカルモデルを想定）
2. **MCPサーバー（手足）**: 外界への干渉（ファイルの読み書き、コマンド実行）
3. **オーケストレーター（司令塔／本プロダクト）**: 全体の管理（状態制御、履歴DBの運用、コンテキストの最適化）

## 概要
ElvesShoemaker は、限られたリソース（vRAM 16GB）で動作を完結させる、ローカル完結型の自律実行基盤です。  
司令塔として、エージェントが内部状態（PDCA）を管理しながら「思考」と「操作」を繰り返し、完了まで自走する環境を提供します。

## 内部ステート（PDCA）の役割
司令塔は、1操作ごとに以下の4つの状態を遷移させます。各フェーズの責務を分離することで、リソースの浪費を抑え、正確な自律性を実現します。

- **Plan（調査と計画）**: 【MCP使用：可】  
  現在の環境（ファイル構成やコードの内容）を調査ツールで把握し、次に実行すべき「一手」を決定します。
- **Do（実行）**: 【MCP使用：可】  
  Planで決定した具体的な作業（ファイルの生成、書き換え、コマンド実行など）を1ステップ実行します。
- **Check（検証）**: 【MCP使用：可】  
  Doの結果を客観的に評価します。テストの実行や差分確認を行い、期待通りの成果が得られたか、エラーがないかを判定します。
- **Act（記憶の整理）**: 【MCP使用：不可（内省）】  
  次ターンのための「脳内整理」に専念します。生の実行ログを破棄・要約し、重要な教訓や進捗のみをDBへ保存します。これによりコンテキストを最小限に圧縮し、16GBのメモリ内で知能を維持し続けます。

## 特徴
- **vRAM 効率化**: Actフェーズでの強制的な要約により、長時間走行しても推論速度が低下しません。
- **重み付け学習**: 成功した手順や重要な修正記録をDBに保存する際、重み付けを行うことで、使えば使うほど環境に馴染んだ職人（Elf）へと進化します。
- **完全ローカル**: 外部コストをかけずに無限に試行錯誤が可能です。

## 動作要件
- **vRAM 16GB (RTX 5060 Ti 等)**
- **LM Studio**（LLMサーバーとして利用）
- **Node.js 環境**
